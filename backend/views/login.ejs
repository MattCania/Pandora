<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<title>Log In</title>
</head>

<body>
	<h1>Log In </h1>
	<form id="inputForm">
		<label for="email">Email</label>
		<input type="text" name="email" id="email">

		<label for="password">Password</label>
		<input type="password" name="password" id="password">

		<input type="submit">

	</form>

	<button id="logout"></button>

	<script>
		document.getElementById("inputForm").addEventListener('submit', function (e) {
			e.preventDefault()

			const email = document.getElementById('email').value;
			const password = document.getElementById('password').value;

			fetch('/api/login', {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json',
				},
				body: JSON.stringify({
					email,
					password
				}),
			})
				.then(res => res.json())
				.then(data => {
					alert("Login Success")
					console.log(data)
				})
				.catch((err) => {
					console.error(err);
				})
		})

		document.getElementById("logout").addEventListener('click', (e) => {
			e.preventDefault()

			fetch('/api/logout', {
				method: 'POST',
				headers: {
					'Content-Type': 'application/json',
				},
			})
				.then(response => {
					if (!response.ok) throw new Error("Logout Failure")
					return response.json()
				})
				.then(data => {
					console.log(data);
				})
				.catch((err) => {
					console.error('There was a problem with the fetch operation:', error);
				})
		})

	</script>
</body>

</html>